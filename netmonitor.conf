# OpenWrt 网络监控服务配置文件
# 版本: v1.0.0 (ARM优化版)

# 是否启用服务 (1=启用, 0=禁用)
ENABLED=1

# WAN 接口名称（根据你的路由器配置修改）
# 常见值：wan, eth0, eth1, pppoe-wan
WAN_IFACE="wan"

# PPPoE 接口名称（如果使用 PPPoE 拨号）
# 如果是桥接模式或 DHCP，可以留空
PPPOE_IFACE="pppoe-wan"

# HTTP API 监听端口（Inetd模式）
API_PORT="8321"

# 允许访问的 IP 白名单（空格分隔多个 IP）
# 留空表示允许所有 IP 访问（不建议生产环境）
# 示例：ALLOWED_IPS="192.168.1.100 192.168.1.101"
ALLOWED_IPS=""

# 访问令牌（用于 HTTP API 认证）
# 如果设置，请求头必须包含：Authorization: Bearer <TOKEN>
# 留空表示不验证令牌（建议生产环境设置）
# 示例：TOKEN="your-secret-token-12345"
TOKEN=""

# Ping 测试目标（空格分隔多个 IP）
# 建议至少包含 2-3 个可靠的公共 DNS 服务器
# 中国用户：223.5.5.5 (阿里云), 114.114.114.114 (114DNS)
# 国际用户：8.8.8.8 (Google), 1.1.1.1 (Cloudflare)
PING_TARGETS="223.5.5.5 8.8.8.8"

# 事件队列最大数量
# 默认：200条，达到最大值后新事件会覆盖最旧事件
MAX_EVENTS=100

# 日志级别（0=禁用, 1=错误, 2=警告, 3=信息, 4=调试）
# 注意：高日志级别会产生更多 I/O，可能影响闪存寿命
LOG_LEVEL=2

# 临时文件路径（必须位于 tmpfs）
# /tmp 在 OpenWrt 中通常是 tmpfs，重启后自动清空
QUEUE_FILE="/tmp/net_events.json"

# 光功率读取方法（自动检测）
# 常见路径：
# - 通过 ubus: ubus call gpon get_status
# - 通过 proc: /proc/GPON
# - 通过其他 proc: /proc/fiber/power
# 脚本会自动尝试这些方法

# 温度读取路径（自动检测）
# 常见路径：
# /sys/class/thermal/thermal_zone0/temp
# /sys/class/hwmon/hwmon0/temp1_input
# /sys/devices/virtual/thermal/thermal_zone0/temp
# 脚本会自动尝试这些路径

# 监控间隔设置（单位：秒）
# WAN状态轮询间隔，0表示禁用（推荐：30秒）
# 该功能用于捕获 ubus 监听可能遗漏的事件
WAN_POLL_INTERVAL=30
